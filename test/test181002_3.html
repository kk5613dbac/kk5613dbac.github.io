<!DOCTYPE HTML>
<html lang="ja-JP">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0" />
<title>カードコンポーネントによるアコーディオン(Ver.4系)</title>
<link rel="stylesheet" href="css/bootstrap.min.css">
<script src="js/jquery-3.3.1.min.js"></script>
<script src="js/popper.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="test180404_2_1002custom.js"></script>

<script>

document.addEventListener('DOMContentLoaded', function(){
detectBrowserType();
makeTable();
    $('.accordion #target1').load('template.html');
    $('.accordion #target2').load('template.html');
    $('.accordion #target3').load('template.html');

    var visibleItem = $('.dropdown .card-header a[data-toggle="collapse"]');
    var selectItem = $('.dropdown .list-group-item:first');
    visibleItem.text(selectItem.attr('value'));
    selectItem.hide();
}, false);

  $(document).ready(function() {
    $('.accordion #target1 .card').attr('data-paymentsId', 'P00000001');
    $('.accordion #target1 .card-header').attr('id', 'headingOne');
    $('.accordion #target1 .collapse').attr('aria-labelledby', 'headingOne');
    $('.accordion #target1 .text-body').attr('href', '#collapseOne');
    $('.accordion #target1 .text-body').attr('aria-controls', 'collapseOne');
    $('.accordion #target1 .collapse').attr('id', 'collapseOne');
    $('.accordion #target1 .card-header td').eq(0).text('2017/10/10');
    $('.accordion #target1 .card-header td').eq(1).text('バス行き（Suica）');
    $('.accordion #target1 .card-header td').eq(2).children('b').text('-\xA5195');
    $('.accordion #target1 .details tr').eq(0).children('td').eq(0).children('b').text('分類');
    $('.accordion #target1 .details tr').eq(0).children('td').eq(1).children('b').text(':');
    $('.accordion #target1 .details tr').eq(0).children('td').eq(2).text('交通費');
    $('.accordion #target1 .details tr').eq(1).children('td').eq(0).children('b').text('種類');
    $('.accordion #target1 .details tr').eq(1).children('td').eq(1).children('b').text(':');
    $('.accordion #target1 .details tr').eq(1).children('td').eq(2).text('支出');
    $('.accordion #target1 .details tr').eq(2).children('td').eq(0).children('b').text('費目／内訳');
    $('.accordion #target1 .details tr').eq(2).children('td').eq(1).children('b').text(':');
    $('.accordion #target1 .details tr').eq(2).children('td').eq(2).text('交通費／バス');
    $('.accordion #target1 .details tr').eq(3).children('td').eq(0).children('b').text('口座');
    $('.accordion #target1 .details tr').eq(3).children('td').eq(1).children('b').text(':');
    $('.accordion #target1 .details tr').eq(3).children('td').eq(2).text('Suica');

    $('.accordion #target2 .card').attr('data-paymentsId', 'P00000002');
    $('.accordion #target2 .card-header').attr('id', 'headingTwo');
    $('.accordion #target2 .collapse').attr('aria-labelledby', 'headingTwo');
    $('.accordion #target2 .text-body').attr('href', '#collapseTwo');
    $('.accordion #target2 .text-body').attr('aria-controls', 'collapseTwo');
    $('.accordion #target2 .collapse').attr('id', 'collapseTwo');
    $('.accordion #target2 .card-header td').eq(0).text('2017/10/10');
    $('.accordion #target2 .card-header td').eq(1).text('Edyチャージ　費目:口座引出、口座:現金、品名:その他');
    $('.accordion #target2 .card-header td').eq(2).children('b').text('-\xA51,000');
    $('.accordion #target2 .details tr').eq(0).children('td').eq(0).children('b').text('分類');
    $('.accordion #target2 .details tr').eq(0).children('td').eq(1).children('b').text(':');
    $('.accordion #target2 .details tr').eq(0).children('td').eq(2).text('クレジット');
    $('.accordion #target2 .details tr').eq(1).children('td').eq(0).children('b').text('種類');
    $('.accordion #target2 .details tr').eq(1).children('td').eq(1).children('b').text(':');
    $('.accordion #target2 .details tr').eq(1).children('td').eq(2).text('出金');
    $('.accordion #target2 .details tr').eq(2).children('td').eq(0).children('b').text('費目／内訳');
    $('.accordion #target2 .details tr').eq(2).children('td').eq(1).children('b').text(':');
    $('.accordion #target2 .details tr').eq(2).children('td').eq(2).text('その他／－');
    $('.accordion #target2 .details tr').eq(3).children('td').eq(0).children('b').text('口座');
    $('.accordion #target2 .details tr').eq(3).children('td').eq(1).children('b').text(':');
    $('.accordion #target2 .details tr').eq(3).children('td').eq(2).text('現金');

    $('.accordion #target3 .card').attr('data-paymentsId', 'P00000003');
    $('.accordion #target3 .card-header').attr('id', 'headingThree');
    $('.accordion #target3 .collapse').attr('aria-labelledby', 'headingThree');
    $('.accordion #target3 .text-body').attr('href', '#collapseThree');
    $('.accordion #target3 .text-body').attr('aria-controls', 'collapseThree');
    $('.accordion #target3 .collapse').attr('id', 'collapseThree');
    $('.accordion #target3 .card-header td').eq(0).text('2017/10/10');
    $('.accordion #target3 .card-header td').eq(1).text('Edyチャージ　費目:口座預入、口座:電子マネー、品名:その他');
    $('.accordion #target3 .card-header td').eq(2).children('b').text('\xA51,000');
    $('.accordion #target3 .details tr').eq(0).children('td').eq(0).children('b').text('分類');
    $('.accordion #target3 .details tr').eq(0).children('td').eq(1).children('b').text(':');
    $('.accordion #target3 .details tr').eq(0).children('td').eq(2).text('クレジット');
    $('.accordion #target3 .details tr').eq(1).children('td').eq(0).children('b').text('種類');
    $('.accordion #target3 .details tr').eq(1).children('td').eq(1).children('b').text(':');
    $('.accordion #target3 .details tr').eq(1).children('td').eq(2).text('入金');
    $('.accordion #target3 .details tr').eq(2).children('td').eq(0).children('b').text('費目／内訳');
    $('.accordion #target3 .details tr').eq(2).children('td').eq(1).children('b').text(':');
    $('.accordion #target3 .details tr').eq(2).children('td').eq(2).text('その他／－');
    $('.accordion #target3 .details tr').eq(3).children('td').eq(0).children('b').text('口座');
    $('.accordion #target3 .details tr').eq(3).children('td').eq(1).children('b').text(':');
    $('.accordion #target3 .details tr').eq(3).children('td').eq(2).text('Edy（再購入）');
});

  $(function(){
    $('.dropdown .list-group-item').click(function(){

/* $( selector [ , context ] ) */
/* セレクター文字列を指定して、マッチした要素群のjQueryオブジェクトを返します。 */
/* selector 要素を特定するセレクター文字列を指定します。 */
/* context contextにDOM要素、document、jQueryオブジェクト等を指定することで、selectorはcontexに指定されたものの中から、要素を特定するようになります。 */
/* $('div.foo').click(function() { */
/*   $('span', this).addClass('bar'); */
/* }); */
/* contextにthisを指定することで、this(div.foo)要素内のspanを対象としています。 */

      $('.list-group-item', $(this).closest('.dropdown')).show();
      var visibleItem = $('.card .card-header a[data-toggle="collapse"]', $(this).closest('.dropdown'));
      visibleItem.text($(this).attr('value'));
      $(this).hide();
    });
  });

  $(function(){
    $('.dropdown .list-group-item').click(function(){
      var visibleItem = $('.collapse', $(this).closest('.dropdown'));
      visibleItem.collapse('hide');
    });
  });

  $(function(){
    $('.btn').click(function(){
    /*if (confirm('ページ遷移しますか？')) {
      window.location.href = '/';
    }*/
      $('.card-header tbody', $(this).closest('.card')).map(function(){
        alert($(this).children('tr').eq(0).children('td').eq(0).text() + '\n'
          + $(this).children('tr').eq(0).children('td').eq(1).text() + '\n'
          + $(this).children('tr').eq(0).children('td').eq(2).text() + '\n');
      });
      $('.card-body .details tbody', $(this).closest('.card')).map(function(){
        alert($(this).children('tr').eq(0).children('td').eq(0).text()
          + $(this).children('tr').eq(0).children('td').eq(1).text()
          + $(this).children('tr').eq(0).children('td').eq(2).text() + '\n'
          + $(this).children('tr').eq(1).children('td').eq(0).text()
          + $(this).children('tr').eq(1).children('td').eq(1).text()
          + $(this).children('tr').eq(1).children('td').eq(2).text() + '\n'
          + $(this).children('tr').eq(2).children('td').eq(0).text()
          + $(this).children('tr').eq(2).children('td').eq(1).text()
          + $(this).children('tr').eq(2).children('td').eq(2).text() + '\n'
          + $(this).children('tr').eq(3).children('td').eq(0).text()
          + $(this).children('tr').eq(3).children('td').eq(1).text()
          + $(this).children('tr').eq(3).children('td').eq(2).text() + '\n');
      });
    });
  });

  $(function(){
    $('.linkTest').click(function(){
	getJSON();
    });
  });

</script>

<style type="text/css">
<!--

/* 先にインラインテーブル化必須 */
.accordion .card .card-body .details,
.accordion .card .card-body .btn-grp {
  display: inline-table;
  vertical-align: middle;
}

.accordion .card .card-header,
.accordion .card .card-body,
.dropdown .card .card-header,
.dropdown .card .list-group-item {
  padding: 0 0 0 0;
  margin: 0 0 0 0;
}

.accordion .card .card-header td,
.accordion .card .card-body td,
.accordion .card .card-body td .btn,
.dropdown .card .card-header,
.dropdown .card .list-group-item,
.category td,
.total td,
.balance-list td,
.balance-list th,
.searchForm .card .card-header,
.linkTest {
  font-size: 14px;
}

.accordion .td-03 {
  background: #cfe6ff;
}

.accordion,
.dropdown .card a[data-toggle="collapse"],
.searchForm .card a[data-toggle="collapse"],
.total,
.linkTest {
  display: block;
}

.accordion .card .card-header a[data-toggle="collapse"]:active,
.accordion .card .card-header a[data-toggle="collapse"]:hover,
.accordion .card .card-header a[data-toggle="collapse"]:focus,
.dropdown .card a[data-toggle="collapse"]:active,
.dropdown .card a[data-toggle="collapse"]:hover,
.dropdown .card a[data-toggle="collapse"]:focus,
.searchForm .card a[data-toggle="collapse"]:active,
.searchForm .card a[data-toggle="collapse"]:hover,
.searchForm .card a[data-toggle="collapse"]:focus {
  text-decoration: none; //リンクテキストの下線を消す
}

.dropdown .card .list-group .custom {
  border: none;
}

.balance-list table {
  width:100%;
}

.balance-list td,
.balance-list th {
  border-left: solid 1px #bbb;
  border-top: solid 1px #bbb;
  border-right: solid 1px #bbb;
  border-bottom: solid 1px #bbb;
}

.balance-list .td-03 {
  background: #cfe6ff;
  text-align:center;
}

-->
</style>

</head>

<body>

<div class="mb-0 category">
  <table width="100%">
    <tr>
      <td width="100%"><b>口座</b></td>
    </tr>
  </table>
</div>
<div class="accordion" id="accordion" role="tablist" aria-multiselectable="true">

<div class="dropdown" id="dropdown" role="tablist" aria-multiselectable="true">
<div class="card">
  <div class="card-header" role="tab" id="collapseListGroupHeading1">
    <div class="mb-0">
      <a href="#collapseListGroup1" class="text-body" role="button" data-toggle="collapse" aria-expanded="false" aria-controls="collapseListGroup1">
        項目を選択してください
      </a>
    </div>
  </div>
  <div class="collapse" role="tabpanel" id="collapseListGroup1" aria-labelledby="collapseListGroupHeading1" aria-expanded="false">
    <ul class="list-group list-group-flush">
      <li class="list-group-item custom" value="みずほ普通（札幌）">
        <a class="collapsed text-body" data-toggle="collapse" href="#collapseDDOne" role="button" aria-expanded="false" aria-controls="collapseDDOne">
          みずほ普通（札幌）
        </a>
      </li>
      <li class="list-group-item custom" value="みずほ普通（辻堂）">
        <a class="collapsed text-body" data-toggle="collapse" href="#collapseDDTwo" role="button" aria-expanded="false" aria-controls="collapseDDTwo">
          みずほ普通（辻堂）
        </a>
      </li>
      <li class="list-group-item custom" value="みずほ定期（札幌）">
        <a class="collapsed text-body" data-toggle="collapse" href="#collapseDDThree" role="button" aria-expanded="false" aria-controls="collapseDDThree">
          みずほ定期（札幌）
        </a>
      </li>
      <li class="list-group-item custom" value="みずほ積立（札幌）">
        <a class="collapsed text-body" data-toggle="collapse" href="#collapseDDFour" role="button" aria-expanded="false" aria-controls="collapseDDFour">
          みずほ積立（札幌）
        </a>
      </li>
      <li class="list-group-item custom" value="現金">
        <a class="collapsed text-body" data-toggle="collapse" href="#collapseDDFive" role="button" aria-expanded="false" aria-controls="collapseDDFive">
          現金
        </a>
      </li>
    </ul>
    </div>
</div>
</div>

<div class="balance-list">
 <table>
    <tbody>
    <tr>
    <th class="td-03">現在の残高</th>
    </tr>
    <tr>
    <td align="right"><b>&yen;140,626</b></td>
    </tr>
    </tbody>
 </table>

</div>

<div class="searchForm" id="searchForm" role="tablist" aria-multiselectable="true">
  <div class="card">
    <div class="card-header" role="tab" id="collapseListGroupHeading2">
      <div class="mb-0">
        <a href="#collapseListGroup2" class="text-body" role="button" data-toggle="collapse" aria-expanded="false" aria-controls="collapseListGroup2">
          詳細検索
        </a>
      </div>
    </div>
    <div id="collapseListGroup2" class="collapse" role="tabpanel" aria-labelledby="collapseListGroupHeading2">
      <div class="card-body">
        【検索フォームを置く】
      </div><!-- /.card-body -->
    </div><!-- /.collapse -->
  </div><!-- /.card -->
</div>

<div class="mb-0 category">
  <table width="100%">
    <tr>
      <td width="100%"><b>支出一覧</b></td>
    </tr>
  </table>
</div>

  <div class="card td-03">
    <div class="card-header">
      <div class="mb-0">
          <table class="btn01" width="100%">
            <tr>
              <td width="30%"><b>日付</b></td>
              <td width="40%"><b>項目</b></td>
              <td><b>支出／収入</b></td>
            </tr>
          </table>
      </div>
    </div><!-- /.card-header -->
  </div><!-- /.card -->

<div id="target">

<div id="target1">
</div><!-- /target1 -->

<div id="target2">
</div><!-- /target2 -->

<div id="target3">
</div><!-- /target3 -->

</div><!-- /target -->

</div><!-- /accordion -->

<div class="mb-0 total">
  <table width="100%">
    <tr align="right">
      <td width="100%"><font color="red"><b>支出総額　　&yen;78,087</b></font></td>
    </tr>
  </table>
</div>

<div class="linkTest">
  <a>テスト</a>
</div>

</body>

</html>