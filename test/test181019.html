<!DOCTYPE HTML>
<html lang="ja-JP">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0" />
<title>カードコンポーネントによるアコーディオン(Ver.4系)</title>
<link rel="stylesheet" href="css/bootstrap.min.css">
<script src="js/jquery-3.3.1.min.js"></script>
<script src="js/popper.js"></script>
<script src="js/bootstrap.min.js"></script>

<script>

var parsedArray;
var browserType = 'Internet Explorer';

document.addEventListener('DOMContentLoaded', function(){

(function() {
  var a = 2;
  var b = 3;
  var c = 7;
  var addResult;
  var resultJSON;
  var xhr = new XMLHttpRequest();
  xhr.open('POST', 'test180330_2_2_1002custom.php', true);
  xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
  xhr.responseType = 'json'
  xhr.onreadystatechange = function() {
    if (xhr.readyState === 4) {
      resultJSON = xhr.response;
      if (resultJSON) {
        if (browserType == 'Internet Explorer') {
          parsedArray = JSON.parse(resultJSON);
          (function(param1, param2) {
            alert(param1 + param2);
          }(addResult, c));
        } else {
          parsedArray = resultJSON;
        }
      } else {
        alert('Error');
      }
    xhr.abort();
    }
  };
  xhr.send();
  addResult = a + b;
}());

}, false);

  $(function(){
    $('.linkTest').click(function(){
      alert(parsedArray);
      alert(parsedArray.length);
      alert(parsedArray[0].length);
    });
  });

</script>

</head>

<body>

<div class="accordion" id="accordion" role="tablist" aria-multiselectable="true">

<div class="sticky-top">

  <div class="card td-03">
    <div class="card-header">
      <div class="mb-0">
        <table class="btn01" width="100%">
          <tr>
            <td width="30%"><b>日付</b></td>
            <td width="40%"><b>項目</b></td>
            <td><b>支出／収入</b></td>
          </tr>
        </table>
      </div>
    </div><!-- /.card-header -->
  </div><!-- /.card -->

</div><!-- /.sticky-top -->

<div id="target">

</div><!-- /target -->

</div><!-- /accordion -->

<div class="linkTest">
  <a>テスト</a>
</div>

</body>

</html>